<div class="sidebar-header">
    <a href="/" class="brand-text">
        <i class="fa-solid fa-feather"></i> USER MANAGER
    </a>
</div>

<nav class="sidebar-nav">
    <!-- Main Navigation -->
    <div class="nav-title">Điều hướng</div>

    {% set session_username = request.session.get('username', '') %}

    {% if session_username and session_username.upper() in ['ADMIN', 'SYSTEM'] %}
    <li class="nav-item">
        <a href="/" class="nav-link {% if request.url.path == '/' %}active{% endif %}">
            <span class="nav-icon"><i class="fa-solid fa-house"></i></span>
            <span class="nav-text">Bảng điều khiển</span>
        </a>
    </li>
    {% endif %}

    <li class="nav-item">
        <a href="/my-account" class="nav-link {% if '/my-account' in request.url.path %}active{% endif %}">
            <span class="nav-icon"><i class="fa-solid fa-user-circle"></i></span>
            <span class="nav-text">Tài khoản của tôi</span>
        </a>
    </li>

    {% if session_username and session_username.upper() in ['ADMIN', 'SYSTEM'] %}
    <!-- User Management (Admin only) -->
    <div class="nav-title">Quản lý User & Profile</div>

    <li class="nav-item">
        <a href="/users" class="nav-link {% if '/users' in request.url.path %}active{% endif %}">
            <span class="nav-icon"><i class="fa-solid fa-users"></i></span>
            <span class="nav-text">Quản lý Người dùng</span>
        </a>
    </li>

    <li class="nav-item">
        <a href="/profiles" class="nav-link {% if '/profiles' in request.url.path %}active{% endif %}">
            <span class="nav-icon"><i class="fa-solid fa-id-card"></i></span>
            <span class="nav-text">Quản lý Profile</span>
        </a>
    </li>

    <!-- Role & Privilege (Admin only) -->
    <div class="nav-title">Phân quyền</div>

    <li class="nav-item">
        <a href="/roles" class="nav-link {% if '/roles' in request.url.path %}active{% endif %}">
            <span class="nav-icon"><i class="fa-solid fa-user-shield"></i></span>
            <span class="nav-text">Quản lý Role</span>
        </a>
    </li>

    <li class="nav-item">
        <a href="/privileges" class="nav-link {% if '/privileges' in request.url.path %}active{% endif %}">
            <span class="nav-icon"><i class="fa-solid fa-key"></i></span>
            <span class="nav-text">Quản lý Quyền</span>
        </a>
    </li>

    <li class="nav-item nav-sub-item">
        <a href="/privileges"
            class="nav-link {% if request.url.path == '/privileges' or request.url.path == '/privileges/grant' %}active{% endif %}">
            <span class="nav-icon"><i class="fa-solid fa-user-lock"></i></span>
            <span class="nav-text">Quyền Hệ thống</span>
        </a>
    </li>
    <li class="nav-item nav-sub-item">
        <a href="/privileges/object"
            class="nav-link {% if '/privileges/object' in request.url.path or '/privileges/column' in request.url.path %}active{% endif %}">
            <span class="nav-icon"><i class="fa-solid fa-table"></i></span>
            <span class="nav-text">Quyền Đối tượng</span>
        </a>
    </li>
    {% endif %}

    <!-- Project Management (All users) -->
    <div class="nav-title">Nghiệp vụ</div>

    <li class="nav-item">
        <a href="/projects" class="nav-link {% if '/projects' in request.url.path %}active{% endif %}">
            <span class="nav-icon"><i class="fa-solid fa-folder-open"></i></span>
            <span class="nav-text">Quản lý Dự án</span>
        </a>
    </li>

    {% if session_username and session_username.upper() in ['ADMIN', 'SYSTEM'] %}
    <!-- Oracle Security (Admin only) -->
    <div class="nav-title">Bảo mật Oracle</div>

    <li class="nav-item">
        <a href="/security" class="nav-link {% if '/security' in request.url.path %}active{% endif %}">
            <span class="nav-icon"><i class="fa-solid fa-shield-halved"></i></span>
            <span class="nav-text">Tính năng Bảo mật</span>
        </a>
    </li>

    <li class="nav-item nav-sub-item">
        <a href="/security/vpd" class="nav-link {% if '/security/vpd' in request.url.path %}active{% endif %}">
            <span class="nav-icon"><i class="fa-solid fa-eye-slash"></i></span>
            <span class="nav-text">VPD (Row Level)</span>
        </a>
    </li>
    <li class="nav-item nav-sub-item">
        <a href="/security/audit" class="nav-link {% if '/security/audit' in request.url.path %}active{% endif %}">
            <span class="nav-icon"><i class="fa-solid fa-file-contract"></i></span>
            <span class="nav-text">Audit (Giám sát)</span>
        </a>
    </li>
    <li class="nav-item nav-sub-item">
        <a href="/security/redaction"
            class="nav-link {% if '/security/redaction' in request.url.path %}active{% endif %}">
            <span class="nav-icon"><i class="fa-solid fa-mask"></i></span>
            <span class="nav-text">Data Redaction</span>
        </a>
    </li>
    {% endif %}
</nav>